{"version":3,"sources":["socket.js"],"names":["_socket","require","socketServer","server","io","Server","cors","origin","methods","socket","console","log","id","on","data","to","userToCall","emit","signalData","from","signal"],"mappings":"2FAAA,IAAAA,QAAAC,QAAA,aAEMC,aAAe,SAACC,GACpB,IAAMC,EAAK,IAAIC,QAAAA,OAAOF,EAAQ,CAC5BG,KAAM,CAEJC,OAAQ,4CANdC,QAAA,CAAA,MAAA,WAIIF,EAAAA,GAAI,aAAE,SAAAG,GACJC,QAAAC,IAAA,yBAAAF,EAAAG,IAEAJ,EAAAA,KAAU,SAAOC,EAARG,IAJbH,EAAAI,GAAA,WAAA,SAAAC,GAQGD,EAAGE,GAAAD,EAAAE,YAAcC,KAACR,MAAW,CAC9BC,OAAYI,EAAAI,WAEZT,KAAOQ,EAAKE,SAKRA,EAAAA,GAAML,aAAKK,SAAAA,GAFsBf,EAAnCW,GAAAD,EAAAC,IAAAE,KAAA,eAAAH,EAAAM,UAOAhB,EAAAS,GAAMC,UAAN,SAAoBA,GADtBV,EAGAW,GAAAD,EAAAC,IAAAE,KAAA,eACAR,EAAOI,GAAG,aAAW,WACnBT,QAAMU,IAAKC,qCAjBfb","file":"socket.min.js","sourcesContent":["import { Server } from \"socket.io\";\r\n\r\nconst socketServer = (server) => {\r\n  const io = new Server(server, {\r\n    cors: {\r\n      // origin: \"http://localhost:3000\",\r\n      origin: \"https://chirags-youtube-clone.netlify.app\",\r\n      methods: [\"GET\", \"POST\"],\r\n    },\r\n  });\r\n\r\n  io.on(\"connection\", (socket) => {\r\n    console.log(\"New client connected: \", socket.id);\r\n\r\n    socket.emit(\"yourID\", socket.id);\r\n\r\n    socket.on(\"callUser\", (data) => {\r\n      io.to(data.userToCall).emit(\"hey\", {\r\n        signal: data.signalData,\r\n        from: data.from,\r\n      });\r\n    });\r\n\r\n    socket.on(\"acceptCall\", (data) => {\r\n      io.to(data.to).emit(\"callAccepted\", data.signal);\r\n    });\r\n    // Added this to handle endCall event\r\n    socket.on(\"endCall\", (data) => {\r\n      io.to(data.to).emit(\"callEnded\");\r\n    });\r\n    socket.on(\"disconnect\", () => {\r\n      console.log(\"Client disconnected\");\r\n    });\r\n  });\r\n};\r\n\r\nexport default socketServer;\r\n"]}
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.login=void 0;var _jsonwebtoken=_interopRequireDefault(require("jsonwebtoken")),_Auth=_interopRequireDefault(require("../Models/Auth.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var login=function(t,n){var r,s,a,o,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.body.email,console.log(r),e.prev=2,e.next=5,regeneratorRuntime.awrap(_Auth.default.findOne({email:r}));case 5:if(s=e.sent,console.log(s),s){e.next=22;break}return e.prev=8,e.next=11,regeneratorRuntime.awrap(_Auth.default.create({email:r}));case 11:a=e.sent,o=_jsonwebtoken.default.sign({email:a.email,id:a._id},process.env.JWT_SECRET,{expiresIn:"1h"}),n.status(200).json({result:a,token:o}),e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(8),n.status(500).json({mess:"something went wrong...."}),e.abrupt("return");case 20:e.next=24;break;case 22:u=_jsonwebtoken.default.sign({email:s.email,id:s._id},process.env.JWT_SECRET,{expiresIn:"1h"}),n.status(200).json({result:s,token:u});case 24:e.next=30;break;case 26:return e.prev=26,e.t1=e.catch(2),n.status(500).json({mess:"something went wrong...."}),e.abrupt("return");case 30:case"end":return e.stop()}},null,null,[[2,26],[8,16]])};exports.login=login;
//# sourceMappingURL=Auth.min.js.map
